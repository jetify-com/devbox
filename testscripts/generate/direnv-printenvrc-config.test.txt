# Testscript to validate generating the contents of the .envrc file. In this case the
# config location is ignored because there is no --envrc-dir param.

exec devbox init
exec devbox generate direnv --print-envrc --config config-dir
cp stdout results.txt
grep 'watch_file config-dir/devbox.json config-dir/devbox.lock' results.txt
grep 'eval "\$\(devbox shellenv --init-hook --install --no-refresh-alias --config config-dir\)"' results.txt
! exists .envrc
! exists config-dir
! exists config-dir/.envrc